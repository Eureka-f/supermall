"use strict";(self["webpackChunksupermall"]=self["webpackChunksupermall"]||[]).push([[284],{7332:function(e,s,t){t.r(s),t.d(s,{default:function(){return is}});var o=t(3396),i=t(9242);const l={class:"detail"};function n(e,s,t,n,a,r){const c=(0,o.up)("detail-bar"),d=(0,o.up)("detail-swiper"),m=(0,o.up)("detail-base-info"),u=(0,o.up)("detail-shop"),h=(0,o.up)("detail-goods"),p=(0,o.up)("detail-param-info"),g=(0,o.up)("detail-comments"),f=(0,o.up)("good-list"),v=(0,o.up)("scroll"),w=(0,o.up)("back-top"),_=(0,o.up)("detail-bottom-bar"),k=(0,o.up)("toast");return(0,o.wg)(),(0,o.iD)("div",l,[(0,o.Wm)(c,{class:"detail-bar",onTitleClick:r.titleClick,"current-index":a.currentIndex},null,8,["onTitleClick","current-index"]),(0,o.Wm)(v,{class:"detail-content",ref:"scroll","probe-type":3,onScroll:r.contentScroll},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{"top-images":a.ItemImage},null,8,["top-images"]),(0,o.Wm)(m,{goods:a.goods},null,8,["goods"]),(0,o.Wm)(u,{shop:a.shop},null,8,["shop"]),(0,o.Wm)(h,{"goods-info":a.goodsinfo,onDetailImgLoad:r.detailImgLoad},null,8,["goods-info","onDetailImgLoad"]),(0,o.Wm)(p,{"param-info":a.paraminfo,ref:"param"},null,8,["param-info"]),(0,o.Wm)(g,{comments:a.comments,ref:"comments"},null,8,["comments"]),(0,o.Wm)(f,{goods:a.recommends,ref:"recommend"},null,8,["goods"])])),_:1},8,["onScroll"]),(0,o.wy)((0,o.Wm)(w,{onClick:r.topClick},null,8,["onClick"]),[[i.F8,a.isShowTar]]),(0,o.Wm)(_,{onAddToCart:r.addToCart},null,8,["onAddToCart"]),(0,o.Wm)(k)])}var a=t(7139),r=t(228);const c=(0,o._)("img",{src:r,alt:""},null,-1),d=[c],m={class:"title"},u=["onClick"];function h(e,s,t,i,l,n){const r=(0,o.up)("nav-bar");return(0,o.wg)(),(0,o.j4)(r,null,{left:(0,o.w5)((()=>[(0,o._)("div",{onClick:s[0]||(s[0]=(...e)=>n.back&&n.back(...e))},d)])),center:(0,o.w5)((()=>[(0,o._)("div",m,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.titles,((e,s)=>((0,o.wg)(),(0,o.iD)("div",{class:(0,a.C_)(["title-item",{titleactive:s===t.currentIndex}]),key:s,onClick:e=>n.titleClick(s)},(0,a.zw)(e),11,u)))),128))])])),_:1})}var p=t(9176),g={props:{currentIndex:{type:Number,default:0}},components:{NavBar:p.Z},data(){return{titles:["商品","参数","评价","推荐"]}},methods:{titleClick(e){this.$emit("titleClick",e)},back(){this.$router.back()}}},f=t(89);const v=(0,f.Z)(g,[["render",h]]);var w=v;const _=["src"];function k(e,s,t,i,l,n){const a=(0,o.up)("swiper-item"),r=(0,o.up)("swiper");return(0,o.wg)(),(0,o.j4)(r,{class:"detail-swiper"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.topImages,(e=>((0,o.wg)(),(0,o.j4)(a,{key:e},{default:(0,o.w5)((()=>[(0,o._)("img",{src:e,alt:""},null,8,_)])),_:2},1024)))),128))])),_:1})}var I=t(8080),y={props:{topImages:{type:Array,default(){return[]}}},components:{Swiper:I.k,SwiperItem:I.t}};const D=(0,f.Z)(y,[["render",k]]);var b=D;const T={key:0,class:"base-info"},C={class:"info-title"},z={class:"info-price"},Y={class:"n-price"},x={class:"o-price"},L={key:0,class:"discount"},S={class:"info-other"},Z={class:"info-service"},W=["src"];function $(e,s,t,i,l,n){return 0!==Object.keys(t.goods).length?((0,o.wg)(),(0,o.iD)("div",T,[(0,o._)("div",C,(0,a.zw)(t.goods.title),1),(0,o._)("div",z,[(0,o._)("span",Y,(0,a.zw)(t.goods.newPrice),1),(0,o._)("span",x,(0,a.zw)(t.goods.oldPrice),1),t.goods.discount?((0,o.wg)(),(0,o.iD)("span",L,(0,a.zw)(t.goods.discount),1)):(0,o.kq)("",!0)]),(0,o._)("div",S,[(0,o._)("span",null,(0,a.zw)(t.goods.columns[0]),1),(0,o._)("span",null,(0,a.zw)(t.goods.columns[1]),1),(0,o._)("span",null,(0,a.zw)(t.goods.services[t.goods.services.length-1].name),1)]),(0,o._)("div",Z,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.goods.services.length-1,(e=>((0,o.wg)(),(0,o.iD)("span",{class:"info-service-item",key:e},[(0,o._)("img",{src:t.goods.services[e-1].icon,alt:""},null,8,W),(0,o._)("span",null,(0,a.zw)(t.goods.services[e-1].name),1)])))),128))])])):(0,o.kq)("",!0)}var j={props:{goods:{type:Object,default(){return{}}}}};const B=(0,f.Z)(j,[["render",$]]);var P=B;const O={class:"shop-info"},H={class:"shop-top"},K=["src"],q={class:"shop-title"},A={class:"shop-middle"},N={class:"middle-item shop-middle-left"},E={class:"sell"},F={class:"item-count"},G=(0,o._)("p",{class:"item-text"},"总销量",-1),M={class:"goodcount"},R={class:"item-count"},X=(0,o._)("p",{class:"item-text"},"全部宝贝",-1),J={class:"middle-item shop-middle-right"},Q=(0,o._)("div",{class:"shop-bottom"},[(0,o._)("div",{class:"goshop"},[(0,o._)("p",null,"进店逛逛")])],-1);function U(e,s,t,i,l,n){return(0,o.wg)(),(0,o.iD)("div",O,[(0,o._)("div",H,[(0,o._)("img",{src:t.shop.logo,alt:""},null,8,K),(0,o._)("span",q,(0,a.zw)(t.shop.name),1)]),(0,o._)("div",A,[(0,o._)("div",N,[(0,o._)("div",E,[(0,o._)("div",F,(0,a.zw)(n.sellCounter),1),G]),(0,o._)("div",M,[(0,o._)("span",R,(0,a.zw)(t.shop.goodcount),1),X])]),(0,o._)("div",J,[(0,o._)("table",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.shop.score,(e=>((0,o.wg)(),(0,o.iD)("tr",{key:e},[(0,o._)("th",null,(0,a.zw)(e.name),1),(0,o._)("td",{class:(0,a.C_)(["item-score",{isBetter:e.isBetter}])},(0,a.zw)(e.score),3),(0,o._)("td",{class:(0,a.C_)({isBetter:e.isBetter})},(0,a.zw)(e.isBetter?"高":"低"),3)])))),128))])])]),Q])}var V={props:{shop:{type:Object,defaule(){return{}}}},data(){return{sellcount:0}},computed:{sellCounter(){return this.sellcount=this.shop.sell,this.sellcount<1e4?this.sellcount:(this.sellcount/1e4).toFixed(1)+"万"}}};const ee=(0,f.Z)(V,[["render",U]]);var se=ee;const te={key:0,class:"goodsinfo"},oe={class:"desc"},ie=(0,o._)("div",{class:"desc-left"},null,-1),le={class:"desc-text"},ne=(0,o._)("div",{class:"desc-right"},null,-1),ae={class:"info-key"},re=["src"];function ce(e,s,t,i,l,n){return 0!==Object.keys(t.goodsInfo).length?((0,o.wg)(),(0,o.iD)("div",te,[(0,o._)("div",oe,[ie,(0,o._)("div",le,(0,a.zw)(t.goodsInfo.desc),1),ne]),(0,o._)("div",ae,(0,a.zw)(t.goodsInfo.detailImage[0].key),1),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.goodsInfo.detailImage[0].list,(e=>((0,o.wg)(),(0,o.iD)("div",{class:"img-list",key:e},[(0,o._)("img",{src:e,alt:"",onLoad:s[0]||(s[0]=(...e)=>n.imgLoad&&n.imgLoad(...e))},null,40,re)])))),128))])):(0,o.kq)("",!0)}var de={props:{goodsInfo:{type:Object,default(){return{}}}},methods:{imgLoad(){this.$emit("detailImgLoad")}}};const me=(0,f.Z)(de,[["render",ce]]);var ue=me;const he={key:0,class:"paraminfo"},pe={class:"info"},ge={class:"info-key"},fe={class:"info-value"},ve={key:0,class:"info-image"},we=["src"];function _e(e,s,t,i,l,n){return 0!==Object.keys(t.paramInfo).length?((0,o.wg)(),(0,o.iD)("div",he,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.paramInfo.rules,((e,s)=>((0,o.wg)(),(0,o.iD)("table",{key:s},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e,((e,s)=>((0,o.wg)(),(0,o.iD)("tr",{key:s},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e,((e,s)=>((0,o.wg)(),(0,o.iD)("td",{key:s},(0,a.zw)(e),1)))),128))])))),128))])))),128)),(0,o._)("table",pe,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.paramInfo.info,((e,s)=>((0,o.wg)(),(0,o.iD)("tr",{key:s},[(0,o._)("td",ge,(0,a.zw)(e.key),1),(0,o._)("td",fe,(0,a.zw)(e.value),1)])))),128))]),0!==Object.keys(t.paramInfo.image).length?((0,o.wg)(),(0,o.iD)("div",ve,[(0,o._)("img",{src:t.paramInfo.image,alt:""},null,8,we)])):(0,o.kq)("",!0)])):(0,o.kq)("",!0)}var ke={props:{paramInfo:{type:Object,default(){return{}}}}};const Ie=(0,f.Z)(ke,[["render",_e]]);var ye=Ie;const De={key:0,class:"comments"},be=(0,o._)("div",{class:"comments-header"},[(0,o._)("div",{class:"title"},"用户评价"),(0,o._)("div",{class:"more"},[(0,o._)("span",null,"更多"),(0,o._)("i",{class:"arrow-right"})])],-1),Te={class:"comments-user"},Ce=["src"],ze={class:"comments-detail"},Ye={class:"detail-other"},xe={class:"date"};function Le(e,s,t,i,l,n){return 0!==Object.keys(t.comments).length?((0,o.wg)(),(0,o.iD)("div",De,[be,(0,o._)("div",Te,[(0,o._)("img",{src:t.comments.user.avatar,alt:""},null,8,Ce),(0,o._)("span",null,(0,a.zw)(t.comments.user.uname),1)]),(0,o._)("div",ze,[(0,o._)("p",null,(0,a.zw)(t.comments.content),1),(0,o._)("div",Ye,[(0,o._)("span",xe,(0,a.zw)(n.ShowDate),1),(0,o._)("span",null,(0,a.zw)(t.comments.style),1)])])])):(0,o.kq)("",!0)}var Se=t(4493),Ze={props:{comments:{type:Object,default(){return{}}}},computed:{ShowDate(){let e=new Date(1e3*this.comments.created);return(0,Se.p)(e,"yyyy-MM-dd")}}};const We=(0,f.Z)(Ze,[["render",Le]]);var $e=We,je=t(8643),Be=t(660);const Pe={class:"bottom-bar"},Oe=(0,o.uE)('<div class="bar-item bar-left"><div><i class="icon service"></i><span class="text">客服</span></div><div><i class="icon shop"></i><span class="text">店铺</span></div><div><i class="icon collect"></i><span class="text">收藏</span></div></div>',1),He={class:"bar-item bar-right"},Ke=(0,o._)("div",{class:"buy"}," 购买 ",-1);function qe(e,s,t,i,l,n){return(0,o.wg)(),(0,o.iD)("div",Pe,[Oe,(0,o._)("div",He,[(0,o._)("div",{class:"car",onClick:s[0]||(s[0]=(...e)=>n.addToCart&&n.addToCart(...e))}," 加入购物车"),Ke])])}var Ae={methods:{addToCart(){this.$emit("addToCart")}}};const Ne=(0,f.Z)(Ae,[["render",qe]]);var Ee=Ne,Fe=t(5636),Ge=t(2954),Me=t(1985),Re=t(7707);function Xe(e){return(0,Re.W)({url:"/detail",params:{iid:e}})}class Je{constructor(e,s,t){this.title=e.title,this.desc=e.desc,this.newPrice=e.price,this.oldPrice=e.oldPrice,this.discount=e.discountDesc,this.columns=s,this.services=t,this.realPrice=e.lowNowPrice}}class Qe{constructor(e){this.logo=e.shopLogo,this.name=e.name,this.sell=e.cSells,this.goodcount=e.cGoods,this.fans=e.cFans,this.score=e.score}}class Ue{constructor(e,s){this.image=e.image?e.image[0]:"",this.info=e.set,this.rules=s.tables}}function Ve(){return(0,Re.W)({url:"/recommend"})}var es=t(5095),ss=t(9749),ts={name:"Detail",components:{DetailBar:w,DetailSwiper:b,DetailBaseInfo:P,DetailShop:se,DetailGoods:ue,DetailParamInfo:ye,DetailComments:$e,GoodList:je.Z,Scroll:Be.Z,DetailBottomBar:Ee,BackTop:Fe.Z,Toast:Ge.Z},mixins:[es.y],data(){return{id:null,ItemImage:[],goods:{},shop:{},goodsinfo:{},paraminfo:{},comments:{},recommends:[],detailimgListener:[],ThemeY:[],currentIndex:0,isShowTar:!1}},created(){this.getDetail(),this.getThemeY=(0,Se.D)((()=>{this.ThemeY=[],this.ThemeY.push(0),this.ThemeY.push(this.$refs.param.$el.offsetTop),this.ThemeY.push(this.$refs.comments.$el.offsetTop),this.ThemeY.push(this.$refs.recommend.$el.offsetTop),this.ThemeY.push(Number.MAX_SAFE_INTEGER)}),100),this.getRecommend()},mounted(){},destory(){Me.Z.off("ItemImageLoad",this.itemImgListener)},methods:{...(0,ss.nv)(["addCart"]),detailImgLoad(){this.newrefresh(),this.getThemeY()},titleClick(e){this.$refs.scroll.scrollTo(0,-this.ThemeY[e],200)},contentScroll(e){this.isShowTar=-e.y>1e3,this.ListenerTheme(-e.y)},getDetail(){this.id=this.$route.params.iid,Xe(this.id).then((e=>{const s=e.result;this.ItemImage=s.itemInfo.topImages,this.goods=new Je(s.itemInfo,s.columns,s.shopInfo.services),this.shop=new Qe(s.shopInfo),this.goodsinfo=s.detailInfo,this.paraminfo=new Ue(s.itemParams.info,s.itemParams.rule),s.rate.list&&(this.comments=s.rate.list[0])}))},getRecommend(){Ve().then((e=>{this.recommends=e.data.list}))},ListenerTheme(e){let s=this.ThemeY.length;for(let t=0;t<s-1;t++){let s=this.ThemeY[t];if(e>=s&&e<this.ThemeY[t+1]){this.currentIndex!==t&&(this.currentIndex=t);break}}},topClick(){this.$refs.scroll.scrollTo(0,0,300)},addToCart(){const e={};e.id=this.id,e.desc=this.goods.desc,e.img=this.ItemImage[0],e.price=this.goods.realPrice,e.title=this.goods.title,this.addCart(e).then((e=>{this.$toast.show(e,2e3)}))}}};const os=(0,f.Z)(ts,[["render",n]]);var is=os},228:function(e,s,t){e.exports=t.p+"img/back.ca421e22.svg"}}]);
//# sourceMappingURL=284.0264c1d6.js.map