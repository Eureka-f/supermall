"use strict";(self["webpackChunksupermall"]=self["webpackChunksupermall"]||[]).push([[374],{3301:function(t,e,a){a.r(e),a.d(e,{default:function(){return j}});var r=a(3396);const s={class:"category"},i=(0,r.Uk)("商品分类"),c={class:"cate-content"};function n(t,e,a,n,o,l){const u=(0,r.up)("nav-bar"),g=(0,r.up)("tab-menu"),d=(0,r.up)("tab-content-category"),h=(0,r.up)("scroll");return(0,r.wg)(),(0,r.iD)("div",s,[(0,r.Wm)(u,{class:"category-navbar"},{center:(0,r.w5)((()=>[i])),_:1}),(0,r._)("div",c,[(0,r.Wm)(g,{"cate-gories":o.category,onItemClick:l.itemClick},null,8,["cate-gories","onItemClick"]),(0,r.Wm)(h,{class:"tab-content"},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{"sub-categories":l.showCategory},null,8,["sub-categories"])])),_:1})])])}var o=a(9176),l=a(7139);const u={class:"tab-menu"},g={class:"tab-list"},d=["onClick"];function h(t,e,a,s,i,c){const n=(0,r.up)("scroll");return(0,r.wg)(),(0,r.iD)("div",u,[(0,r.Wm)(n,{class:"tab-content"},{default:(0,r.w5)((()=>[(0,r._)("div",g,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.cateGories,((t,e)=>((0,r.wg)(),(0,r.iD)("div",{class:(0,l.C_)(["tab-list-item",{active:e===i.currentIndex}]),key:e,onClick:t=>c.tabClick(e)},(0,l.zw)(t.title),11,d)))),128))])])),_:1})])}var y=a(660),m={props:{cateGories:{type:Array,default(){return[]}}},components:{Scroll:y.Z},data(){return{currentIndex:0}},methods:{tabClick(t){this.currentIndex=t,this.$emit("itemClick",t)}}},p=a(89);const b=(0,p.Z)(m,[["render",h]]);var f=b;const v={class:"tab-content"},w=["href"],C=["src"],k={class:"item-text"};function x(t,e,a,s,i,c){const n=(0,r.up)("grid-view");return(0,r.wg)(),(0,r.iD)("div",v,[a.subCategories.list?((0,r.wg)(),(0,r.j4)(n,{key:0,cols:3,"line-space":15,"v-margin":20},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.subCategories.list,((t,e)=>((0,r.wg)(),(0,r.iD)("div",{key:e,class:"item"},[(0,r._)("a",{href:t.link},[(0,r._)("img",{src:t.image,alt:"",class:"item-img"},null,8,C),(0,r._)("div",k,(0,l.zw)(t.title),1)],8,w)])))),128))])),_:1})):(0,r.kq)("",!0)])}const D={class:"grid-view",ref:"gridView"};function I(t,e,a,s,i,c){return(0,r.wg)(),(0,r.iD)("div",D,[(0,r.WI)(t.$slots,"default")],512)}var S={props:{cols:{type:Number,default:2},vMargin:{type:Number,default:8},hMargin:{type:Number,default:8},itemSpace:{type:Number,default:8},lineSpace:{type:Number,default:8}},mounted(){setTimeout(this.autoLayout(),200)},methods:{autoLayout(){let t=this.$refs.gridView,e=t.children;t.style.padding=`${this.vMargin}px ${this.hMargin}px`;let a=(t.clientWidth-2*this.hMargin-(this.cols-1)*this.itemSpace)/this.cols;for(let r=0;r<e.length;r++){let t=e[r];t.style.width=a+"px",(r+1)%this.cols!==0&&(t.style.marginRight=this.itemSpace+"px"),r>=this.cols&&(t.style.marginTop=this.lineSpace+"px")}}}};const _=(0,p.Z)(S,[["render",I]]);var W=_,Z={props:{subCategories:{type:Object,default(){return{}}}},components:{GridView:W}};const M=(0,p.Z)(Z,[["render",x]]);var N=M,$=a(7707);function K(){return(0,$.W)({url:"/category"})}function T(t){return(0,$.W)({url:"/subcategory",params:{maitKey:t}})}var G={name:"Category",components:{NavBar:o.Z,TabMenu:f,TabContentCategory:N,Scroll:y.Z},data(){return{category:[],categoryData:{},currentIndex:-1}},created(){this.getCategory()},computed:{showCategory(){return-1===this.currentIndex?{}:this.categoryData[this.currentIndex].subcategory}},methods:{getCategory(){K().then((t=>{this.category=t.data.category.list;for(let e=0;e<this.category.length;e++)this.categoryData[e]={subcategory:{},categorydetail:{pop:[],sell:[],new:[]}};this.getSubcategory(0),console.log(this.currentIndex)}))},getSubcategory(t){this.currentIndex=t;let e=this.category[t].maitKey;T(e).then((e=>{this.categoryData[t].subcategory=e.data,this.categoryData={...this.categoryData}}))},itemClick(t){this.getSubcategory(t)}}};const V=(0,p.Z)(G,[["render",n]]);var j=V}}]);
//# sourceMappingURL=374.80292a48.js.map